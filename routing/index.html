<!doctype html>
<html>
<head>
    <script type="text/javascript" src="/codebase/webix.js"></script>
    <link rel="stylesheet" type="text/css" href="/codebase/webix.css">
</head>
<body>
    <script>
        webix.ready(function () {

            var grid = {
                id: "grid",
                url: "/data",
                save:"rest->/data",
                view: "datatable", select: "row",
                multiselect: true,
                columns: [
                    { id: "title", header: "Title", editor: "text", fillspace: 2 },
                    { id: "content", editor: "popup", fillspace: 8 },
                    { id: "place", editor: "text", fillspace: 2 },
                    {
                        id: "date", editor: "date", map: "(date)#date#",
                        format: webix.Date.dateToStr("%d.%m.%Y"), fillspace: 2
                    },
                    { id: "priority", editor: "select", options: [1, 2, 3, 4, 5], fillspace: 1 },
                ],
                editable: true, editaction: "dblclick"
            };

            function add_row() {
                $$("grid").add({ name: "New item" });
            }
            function delete_row() {
                $$("grid").remove($$("grid").getSelectedId(true));
            }
            function clearSelection() {
                $$("grid").unselectAll();
            }

            function Button(id, value, width, onClickFunction) {
                this.view = "button";
                this.id = id;
                this.value = value;
                this.width = width;
                this.click = onClickFunction;
            }

            webix.ui({
                rows: [
                    {
                        cols: [
                            { template: "Data master" },
                            {
                                view: "button",
                                value: "Reset filteres",
                                width: 150
                            },
                            {
                                view: "combo",
                                label: 'Change locale:',
                                labelWidth: 130,
                                width: 230,
                                align: "right",
                                value: "en-US",
                                options: [
                                    "ru-RU",
                                    "en-US"
                                ]
                            }
                        ]
                    },
                    grid,
                    {
                        view: "toolbar",
                        id: "buttonContainer",
                        height: 50,
                        elements: [
                            new Button("addRow", "Add row", 150, add_row),
                            new Button("clearSelection", "Clear selection", 150, clearSelection),
                            new Button("deleteRow", "Delete row", 150, delete_row),
                            //new Button("reservedButton", "Reserved button", "form", 150, reservedButton),
                            {}
                        ]
                    }
                ]
            });

        })
    </script>
</body>
</html>
